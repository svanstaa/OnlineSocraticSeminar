---
layout: default
---

<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  {%- if site.posts.size > 0 -%}
    <h2 class="post-list-heading">{{ page.list_title | default: "Sessions" }}</h2>
    <ul class="post-list">
      {%- for post in site.posts -%}
      <li>
        {%- assign date_format = site.minima.date_format | default: "%b %-d, %Y" -%}
        <span class="post-meta">{{ post.date | date: date_format }}</span>
        <h3>
          <a class="post-link" href="{{ post.url | relative_url }}">
            {{ post.title | escape }}
          </a>
        </h3>
        {%- if site.show_excerpts -%}
          {{ post.excerpt }}
        {%- endif -%}
      </li>
      {%- endfor -%}
    </ul>
  {%- endif -%}

  <div class="topic-suggestions">
    <h2>Themen f√ºr die n√§chste Session vorschlagen</h2>
    
    <div class="suggestion-methods">
      <div class="method github-method">
        <h3>üìù Via GitHub Issues</h3>
        <p>Erstelle ein Issue in unserem Repository um Diskussionsthemen vorzuschlagen:</p>
        <a href="https://github.com/svanstaa/OnlineSocraticSeminar/issues/new?title=Themenvorschlag:&body=**Thema:**%0A%0A**Link(s):**%0A%0A**Warum%20ist%20das%20interessant%20f√ºr%20die%20Diskussion?**%0A" 
           target="_blank" class="btn-github">
          Themenvorschlag Issue erstellen
        </a>
      </div>
      
      <div class="method telegram-method">
        <h3>üí¨ Via Telegram</h3>
        <p>Sende deinen Vorschlag direkt an unseren Telegram-Kanal:</p>
        <form class="telegram-form" onsubmit="sendToTelegram(event)">
          <input type="text" id="submitterName" placeholder="Dein Name (optional)" />
          <textarea id="topicSuggestion" placeholder="Gib hier deinen Themenvorschlag ein..." rows="4"></textarea>
          <button type="submit" class="btn-telegram" id="telegramBtn">An Telegram-Kanal senden</button>
        </form>
        <div id="telegramStatus" class="status-message"></div>
      </div>
    </div>
    
    <div class="topic-suggestion-link">
      <p><a href="{{ "/themen-vorschlagen/" | relative_url }}" class="suggest-topics-btn">üí° Tipps f√ºr gute Themenvorschl√§ge</a></p>
    </div>
  </div>

  <script>
    async function sendToTelegram(event) {
      event.preventDefault();
      const suggestion = document.getElementById('topicSuggestion').value.trim();
      const submitterName = document.getElementById('submitterName').value.trim();
      const statusDiv = document.getElementById('telegramStatus');
      const submitBtn = document.getElementById('telegramBtn');
      
      if (!suggestion) {
        statusDiv.innerHTML = '<span class="error">Bitte gib einen Themenvorschlag ein</span>';
        return;
      }
      
      // Show loading state
      submitBtn.disabled = true;
      submitBtn.textContent = 'Wird gesendet...';
      statusDiv.innerHTML = '<span class="loading">Sende an Telegram-Kanal...</span>';
      
      try {
        const response = await fetch('/api/telegram-suggestion', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            suggestion: suggestion,
            submitterName: submitterName || 'Anonym',
            timestamp: new Date().toISOString()
          })
        });
        
        if (response.ok) {
          statusDiv.innerHTML = '<span class="success">‚úÖ Themenvorschlag erfolgreich an den Telegram-Kanal gesendet!</span>';
          document.getElementById('topicSuggestion').value = '';
          document.getElementById('submitterName').value = '';
        } else {
          throw new Error('Server error');
        }
      } catch (error) {
        console.error('Error:', error);
        statusDiv.innerHTML = '<span class="error">‚ùå Fehler beim Senden. Bitte versuche es sp√§ter erneut oder nutze GitHub Issues.</span>';
      } finally {
        // Reset button
        submitBtn.disabled = false;
        submitBtn.textContent = 'An Telegram-Kanal senden';
        
        // Clear status after 5 seconds
        setTimeout(() => {
          statusDiv.innerHTML = '';
        }, 5000);
      }
    }
  </script>

</div>
